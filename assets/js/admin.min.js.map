{"version":3,"sources":["admin.js"],"names":["jQuery","document","ready","$","on","e","preventDefault","nonce","this","data","order_id","self","ajax","url","Reepay_Admin","ajax_url","type","action","beforeSend","html","text_wait","prop","success","response","window","location","href","amount","alert","error","val","JSON","stringify","console","log","authorized","settled","formatted_amount","settle","confirm","settle_order","Number","complete","submit","inputmask","alias","groupSeparator"],"mappings":"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","file":"admin.min.js","sourcesContent":["jQuery(document).ready(function ($) {\r\n    $(document).on('click', '#reepay_capture', function (e) {\r\n        e.preventDefault();\r\n        var nonce = $(this).data('nonce');\r\n        var order_id = $(this).data('order-id');\r\n        var self = $(this);\r\n\r\n        $.ajax({\r\n            url: Reepay_Admin.ajax_url,\r\n            type: 'POST',\r\n            data: {\r\n                action: 'reepay_capture',\r\n                nonce: nonce,\r\n                order_id: order_id\r\n            },\r\n            beforeSend: function () {\r\n                self.data('text', self.html());\r\n                self.html(Reepay_Admin.text_wait);\r\n                self.prop('disabled', true);\r\n            },\r\n            success: function (response) {\r\n                self.html(self.data('text'));\r\n                self.prop('disabled', false);\r\n                if (!response.success) {\r\n                    return false;\r\n                }\r\n\r\n                window.location.href = location.href;\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '#reepay_cancel', function (e) {\r\n        e.preventDefault();\r\n        var nonce = $(this).data('nonce');\r\n        var order_id = $(this).data('order-id');\r\n        var self = $(this);\r\n        $.ajax({\r\n            url: Reepay_Admin.ajax_url,\r\n            type: 'POST',\r\n            data: {\r\n                action: 'reepay_cancel',\r\n                nonce: nonce,\r\n                order_id: order_id\r\n            },\r\n            beforeSend: function () {\r\n                self.data('text', self.html());\r\n                self.html(Reepay_Admin.text_wait);\r\n                self.prop('disabled', true);\r\n            },\r\n            success: function (response) {\r\n                self.html(self.data('text'));\r\n                self.prop('disabled', false);\r\n                /*\r\n                if (!response.success) {\r\n                    alert(response.data);\r\n                    return false;\r\n                }\r\n                */\r\n                window.location.href = location.href;\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '#reepay_refund', function (e) {\r\n        e.preventDefault();\r\n        var nonce = $(this).data('nonce');\r\n        var order_id = $(this).data('order-id');\r\n        var amount = $(this).data('amount');\r\n        var self = $(this);\r\n        $.ajax({\r\n            url: Reepay_Admin.ajax_url,\r\n            type: 'POST',\r\n            data: {\r\n                action: 'reepay_refund',\r\n                nonce: nonce,\r\n                order_id: order_id,\r\n                amount: amount\r\n            },\r\n            beforeSend: function () {\r\n                self.data('text', self.html());\r\n                self.html(Reepay_Admin.text_wait);\r\n                self.prop('disabled', true);\r\n            },\r\n            success: function (response) {\r\n                self.html(self.data('text'));\r\n                self.prop('disabled', false);\r\n                if (!response.success) {\r\n                    alert(response.data);\r\n                    return false;\r\n                }\r\n\r\n                window.location.href = location.href;\r\n            },\r\n            error: function (response) {\r\n                alert(response);\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '#reepay_capture_partly', function (e) {\r\n        e.preventDefault();\r\n        var nonce = $(this).data('nonce');\r\n        var order_id = $(this).data('order-id');\r\n        var amount = $(\"#reepay-capture_partly_amount-field\").val();\r\n        var self = $(this);\r\n\r\n        $.ajax({\r\n            url: Reepay_Admin.ajax_url,\r\n            type: 'POST',\r\n            data: {\r\n                action: 'reepay_capture_partly',\r\n                nonce: nonce,\r\n                order_id: order_id,\r\n                amount: amount\r\n            },\r\n            beforeSend: function () {\r\n                self.data('text', self.html());\r\n                self.html(Reepay_Admin.text_wait);\r\n                self.prop('disabled', true);\r\n            },\r\n            success: function (response) {\r\n                self.html(self.data('text'));\r\n                self.prop('disabled', false);\r\n                if (!response.success) {\r\n                    alert(response.data);\r\n                    return false;\r\n                }\r\n                window.location.href = location.href;\r\n            },\r\n            error: function (response) {\r\n                alert(\"error response: \" + JSON.stringify(response));\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '#reepay_refund_partly', function (e) {\r\n        console.log('refund_partually');\r\n        e.preventDefault();\r\n        var nonce = $(this).data('nonce');\r\n        var order_id = $(this).data('order-id');\r\n        var amount = $(\"#reepay-refund_partly_amount-field\").val();\r\n        var self = $(this);\r\n\r\n        $.ajax({\r\n            url: Reepay_Admin.ajax_url,\r\n            type: 'POST',\r\n            data: {\r\n                action: 'reepay_refund_partly',\r\n                nonce: nonce,\r\n                order_id: order_id,\r\n                amount: amount\r\n            },\r\n            beforeSend: function () {\r\n                self.data('text', self.html());\r\n                self.html(Reepay_Admin.text_wait);\r\n                self.prop('disabled', true);\r\n            },\r\n            success: function (response) {\r\n                self.html(self.data('text'));\r\n                self.prop('disabled', false);\r\n                if (!response.success) {\r\n                    alert(response.data);\r\n                    return false;\r\n                }\r\n                window.location.href = location.href;\r\n            },\r\n            error: function (response) {\r\n                alert(\"error response: \" + JSON.stringify(response));\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '#woocommerce-order-actions .button', function (e) {\r\n        e.preventDefault();\r\n\r\n        var order_id = $(\"#reepay_order_id\").data('order-id');\r\n        var amount = $('#reepay_order_total').data('order-total');\r\n        var authorized = $('#reepay_order_total_authorized').val();\r\n        var settled = $('#reepay_order_total_settled').val();\r\n        var formatted_amount = $(\"#reepay_order_total\").val();\r\n        if (amount > 0 && settled < authorized && $(\"#order_status option:selected\").val() == 'wc-completed') {\r\n            const settle = window.confirm('You are about to change the order status. Do you want to capture the remaining amount of ' + formatted_amount + ' at the same time? Click OK to continue with settle. Click Cancel to continue without settle.');\r\n\r\n            $.ajax({\r\n                url: Reepay_Admin.ajax_url,\r\n                type: 'POST',\r\n                data: {\r\n                    action: 'reepay_set_complete_settle_transient',\r\n                    nonce: Reepay_Admin.nonce,\r\n                    order_id: order_id,\r\n                    settle_order: Number(settle)\r\n                },\r\n                beforeSend: function () {\r\n                },\r\n                success: function () {\r\n                },\r\n                error: function (response) {\r\n                    alert(\"error response: \" + JSON.stringify(response));\r\n                },\r\n                complete: function () {\r\n                    $('#post').submit();\r\n                }\r\n            });\r\n\r\n        } else {\r\n            $('#post').submit();\r\n        }\r\n    });\r\n\r\n    $('#reepay-capture_partly_amount-field, #reepay-refund_partly_amount-field').inputmask({\r\n        alias: \"currency\",\r\n        groupSeparator: ''\r\n    });\r\n});"]}